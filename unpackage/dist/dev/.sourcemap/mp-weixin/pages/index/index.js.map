{"version":3,"sources":["uni-app:///main.js",null,"webpack:///C:/Users/chenh/Desktop/weapp-heytea/pages/index/index.vue?e7ab","webpack:///C:/Users/chenh/Desktop/weapp-heytea/pages/index/index.vue?2274","webpack:///C:/Users/chenh/Desktop/weapp-heytea/pages/index/index.vue?97d1","uni-app:///pages/index/index.vue","webpack:///C:/Users/chenh/Desktop/weapp-heytea/pages/index/index.vue?92ed","webpack:///C:/Users/chenh/Desktop/weapp-heytea/pages/index/index.vue?00d2"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","components","Actions","ProductModal","CartBar","data","switchBtnIdx","distance","storeName","noticeList","categories","productScrollTop","curCategoryId","productModalVisible","product","cart","headAdList","bottomAdList","searchIcon","starIcon","rightArrowIcon","downArrowIcon","computed","singleProductCartNum","onLoad","updated","methods","pay","clearall","handleAddToCart","id","cate_id","name","price","number","image","is_single","material_text","handleMinusFromCart","index","handAddToCartInModal","closeProductModal","showProductModal","switchTabChange","uni","url","handleMenuSelected","calcSize","adDom","size","h","productsDom","item"],"mappings":";;;;;;;;;;;;;AAAA;AAGA;AACA;AAHA;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1DC,UAAU,CAACC,cAAI,CAAC,C;;;;;;;;;;;;;ACLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAA8H;AAC9H;AACyD;AACL;AACsC;;;AAG1F;AACgL;AAChL,gBAAgB,oLAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,4FAAM;AACR,EAAE,qGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,gGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxCA;AAAA;AAAA;AAAA;AAAmqB,CAAgB,kpBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eC2GvrB;EACAC;IACAC;IACAC;IACAC;EACA;EACAC;IACA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC,aACA,wFACA,wFACA,wFACA,uFACA;MACAC,eACA,wFACA,wFACA,wFACA,uFACA;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MAAA;MACA;QACA;UACA;YACA;UACA;UACA;QACA;QACA;MACA;IACA;EACA;EACAC;IAAA;IAAA;MAAA;MAAA;QAAA;UAAA;YAAA;cAAA;cAAA,OACA;YAAA;cAAA;cAAA;cAAA,OACA;YAAA;cAAA;cACA;cACA;gBAAA;cAAA;YAAA;YAAA;cAAA;UAAA;QAAA;MAAA;IAAA;EACA;EACAC;EACAC;IACAC,qBAEA;IACAC,+BAEA;IACA;IACAC;MAAA;MACA;QACA;UACA;UACA;QACA;QACA;MACA;MACA;MACA;QACA;MACA;MACA;MACA;MACA;QACAC;QACAC;QACAC;QAAA;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;IACAC;MACA;MACA;QACAC;UAAA;QAAA;MACA;QACAA;UAAA;QAAA;MACA;MACA;MACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;MACA;QACAC;UACAC;QACA;MACA;IACA;IACAC;MAAA;QAAA;MACA;MACA;QAAA;MAAA;MACA;MACA;QAAA;MAAA;MACA;IACA;IACAC;MACA;MACA;MACAC;QACAC;MACA;QACAC;MACA;MAEA;QACA;QACAC;UACAF;QACA;UACAG;UACAF;UACAE;QACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACjQA;AAAA;AAAA;AAAA;AAA0xC,CAAgB,qrCAAG,EAAC,C;;;;;;;;;;;ACA9yC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=57280228&scoped=true&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"57280228\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=57280228&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l2 = _vm.__map(_vm.categories, function (category, index) {\n    var $orig = _vm.__get_orig(category)\n    var l1 = _vm.__map(category.products, function (product, pIdx) {\n      var $orig = _vm.__get_orig(product)\n      var l0 = _vm.__map(product.labels, function (tag, tIdx) {\n        var $orig = _vm.__get_orig(tag)\n        var g0 = _vm.$util.hexToRgba(tag.label_color, 0.2)\n        return {\n          $orig: $orig,\n          g0: g0,\n        }\n      })\n      var m0 = _vm.singleProductCartNum(product.id)\n      return {\n        $orig: $orig,\n        l0: l0,\n        m0: m0,\n      }\n    })\n    return {\n      $orig: $orig,\n      l1: l1,\n    }\n  })\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l2: l2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container d-flex flex-column\">\r\n\t\t<view class=\"header\">\r\n\t\t\t<view class=\"search-box flex-horizontal-center\">\r\n\t\t\t\t<view class=\"search-input w-100 flex-horizontal-center\">\r\n\t\t\t\t\t<image class=\"icon mr-10\" :src=\"searchIcon\"></image>\r\n\t\t\t\t\t<text>搜索</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"center\">\r\n\t\t\t\t<view class=\"store flex-between-center \">\r\n\t\t\t\t\t<view class=\"store-name d-flex align-items-center overflow-hidden\">\r\n\t\t\t\t\t\t<image class=\"flex-shrink-0 star-icon\" :src=\"starIcon\"></image>\r\n\t\t\t\t\t\t<text class=\"text-lg font-bold text-truncate\">{{storeName}}</text>\r\n\t\t\t\t\t\t<image class=\"flex-shrink-0 r-arrow-icon\" :src=\"rightArrowIcon\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"switch-btns d-flex align-items-center\">\r\n\t\t\t\t\t\t<button class=\"sw-btn\" :class=\"{'active': !switchBtnIdx}\" type=\"default\"\r\n\t\t\t\t\t\t\t@tap=\"switchTabChange(0)\">自取</button>\r\n\t\t\t\t\t\t<button class=\"sw-btn\" :class=\"{'active': switchBtnIdx}\" type=\"default\"\r\n\t\t\t\t\t\t\t@tap=\"switchTabChange(1)\">外卖</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"distance text-color-assist\">距离您{{distance}}m</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"notice d-flex text-color-assist\">\r\n\t\t\t\t<swiper class=\"notice-swipper\" vertical :autoplay=\"true\" :interval=\"3000\" :duration=\"1000\">\r\n\t\t\t\t\t<swiper-item v-for=\"(notice, nIdx) in noticeList\" :key=\"nIdx\">\r\n\t\t\t\t\t\t<view class=\"notice-swiper-item d-flex align-items-center overflow-hidden\">\r\n\t\t\t\t\t\t\t<image class=\"flex-shrink-0 n-icon mr-10\" :src=\"notice.image\"></image>\r\n\t\t\t\t\t\t\t<text class=\"n-content text-truncate\">{{notice.content}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</swiper-item>\r\n\t\t\t\t</swiper>\r\n\t\t\t\t<view class=\"more pl-30 d-flex align-items-center\">\r\n\t\t\t\t\t<text class=\"\">更多</text>\r\n\t\t\t\t\t<image class=\"down-icon ml-10\" :src=\"downArrowIcon\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"main\">\r\n\t\t\t<scroll-view class=\"menu-bar\" scroll-y>\r\n\t\t\t\t<view class=\"menu-wrap\">\r\n\t\t\t\t\t<view class=\"cate-item flex-vertical-center overflow-hidden\" :class=\"{active: curCategoryId == cate.id}\"\r\n\t\t\t\t\t\tv-for=\"(cate,cIdx) in categories\" :key=\"cIdx\" @tap=\"handleMenuSelected(cate.id)\">\r\n\t\t\t\t\t\t<image class=\"c-icon\" :src=\"cate.category_image_url\"></image>\r\n\t\t\t\t\t\t<text class=\"c-content text-truncate\">{{cate.name}}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t\t<scroll-view class=\"product-list\" scroll-y :scroll-top=\"productScrollTop\">\r\n\t\t\t\t<view class=\"product-wrap\">\r\n\t\t\t\t\t<view id=\"ads\" class=\"ad-swipper\">\r\n\t\t\t\t\t\t<swiper class=\"ad-swiper mb-20\" :indicator-dots=\"true\" :autoplay=\"true\" :interval=\"3000\" :duration=\"1000\">\r\n\t\t\t\t\t\t\t<swiper-item class=\"-ad-swiper-item\" v-for=\"(headAd, haIdx) in headAdList\" :key=\"haIdx\">\r\n\t\t\t\t\t\t\t\t<image class=\"ad-img\" :src=\"headAd\"></image>\r\n\t\t\t\t\t\t\t</swiper-item>\r\n\t\t\t\t\t\t</swiper>\r\n\t\t\t\t\t\t<swiper class=\"ad-swiper\" :indicator-dots=\"true\" :autoplay=\"true\" :interval=\"3000\" :duration=\"1000\">\r\n\t\t\t\t\t\t\t<swiper-item class=\"ad-swiper-item\" v-for=\"(bottomAd, baIdx) in bottomAdList\" :key=\"baIdx\">\r\n\t\t\t\t\t\t\t\t<image class=\"ad-img\" :src=\"bottomAd\"></image>\r\n\t\t\t\t\t\t\t</swiper-item>\r\n\t\t\t\t\t\t</swiper>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"product-group-list mb-20\" v-for=\"(category, index) in categories\" :id=\"'products-'+category.id\"\r\n\t\t\t\t\t\t:key=\"index\">\r\n\t\t\t\t\t\t<view class=\"list-header ptb-30\">{{category.name}}</view>\r\n\t\t\t\t\t\t<view class=\"list-wrap\">\r\n\t\t\t\t\t\t\t<view class=\"item d-flex align-items-center mb-40\" v-for=\"(product, pIdx) in category.products\"\r\n\t\t\t\t\t\t\t\t:key=\"pIdx\" @click=\"showProductModal(product)\">\r\n\t\t\t\t\t\t\t\t<image class=\"flex-shrink-0 i-image\" :src=\"product.images[0].url\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t\t\t<view class=\"i-infos overflow-hidden\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"name text-medium\">{{product.name}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"tags-scroll d-flex flex-wrap\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"tag mr-10 text-truncate\" v-for=\"(tag, tIdx) in product.labels\" :style=\"{\r\n\t\t\t\t\t\t\t\t\t\t\t'color': tag.label_color,\r\n\t\t\t\t\t\t\t\t\t\t\t'background': $util.hexToRgba(tag.label_color, 0.2)\r\n\t\t\t\t\t\t\t\t\t\t}\" :key=\"tIdx\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{tag.name}}\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"desc text-sm text-color-assist mb-20\">{{product.description}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"price flex-between-center\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"text-extra-lg font-bold\">￥{{product.price}}</view>\r\n\t\t\t\t\t\t\t\t\t\t<actions :materialsBtn=\"!product.is_single\" :number=\"singleProductCartNum(product.id)\"\r\n\t\t\t\t\t\t\t\t\t\t\t@add=\"handleAddToCart(product)\" @minus=\"handleMinusFromCart(product)\"\r\n\t\t\t\t\t\t\t\t\t\t\t@materials=\"showProductModal(product)\">\r\n\t\t\t\t\t\t\t\t\t\t</actions>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t\t<product-modal :visible=\"productModalVisible\" :product=\"product\" @close=\"closeProductModal\"\r\n\t\t\t@add-to-cart=\"handAddToCartInModal\"></product-modal>\r\n\t\t<cart-bar :cart=\"cart\" @pay=\"pay\" @clear=\"clearall\" @add=\"handleAddToCart\" @minus=\"handleMinusFromCart\"></cart-bar>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport Actions from './components/actions.vue'\r\n\timport ProductModal from './components/product-modal/product-modal.vue'\r\n\timport CartBar from './components/cartbar/cartbar.vue'\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tActions,\r\n\t\t\tProductModal,\r\n\t\t\tCartBar,\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tswitchBtnIdx: 0, // 配送方式按钮\r\n\t\t\t\tdistance: 99,\r\n\t\t\t\tstoreName: '中心城店',\r\n\t\t\t\tnoticeList: [],\r\n\t\t\t\tcategories: [],\r\n\t\t\t\tproductScrollTop: 0, // 右侧商品滑动条\r\n\t\t\t\tcurCategoryId: '',\r\n\t\t\t\tproductModalVisible: false, // 商品详情\r\n\t\t\t\tproduct: {},\r\n\t\t\t\tcart: [], // 购物车\r\n\t\t\t\theadAdList: [\r\n\t\t\t\t\t\"https://go.cdn.heytea.com/storage/ad/2020/05/28/752a5519e89541bd8417614c599cf8c3.jpg\",\r\n\t\t\t\t\t\"https://go.cdn.heytea.com/storage/ad/2020/05/24/38b7f686cf10449c85b0f5489d5d958e.jpg\",\r\n\t\t\t\t\t\"https://go.cdn.heytea.com/storage/ad/2020/05/21/2315beb5105944e8b795c5c0084ec99f.jpg\",\r\n\t\t\t\t\t\"https://go.cdn.heytea.com/storage/ad/2020/05/21/b88c6780a73249b0b0166784917a5046.jpg\",\r\n\t\t\t\t],\r\n\t\t\t\tbottomAdList: [\r\n\t\t\t\t\t\"https://go.cdn.heytea.com/storage/ad/2020/05/21/acfc6504f3074cf6b730f516adc558f6.jpg\",\r\n\t\t\t\t\t\"https://go.cdn.heytea.com/storage/ad/2020/04/26/2373600789c64752b2415293877ead40.jpg\",\r\n\t\t\t\t\t\"https://go.cdn.heytea.com/storage/ad/2020/04/22/515df8c726e740089ae4c55582b4ce09.jpg\",\r\n\t\t\t\t\t\"https://go.cdn.heytea.com/storage/ad/2020/04/14/d0e51cb22c0a437293c0e6a879b59c7d.jpg\",\r\n\t\t\t\t],\r\n\t\t\t\tsearchIcon: this.$imgHttps + '/static/images/common/search-icon.png',\r\n\t\t\t\tstarIcon: this.$imgHttps + '/static/images/common/star_normal.png',\r\n\t\t\t\trightArrowIcon: this.$imgHttps + '/static/images/common/black_arrow_right.png',\r\n\t\t\t\tdownArrowIcon: this.$imgHttps + '/static/images/common/gray_arrow_down.png',\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\tsingleProductCartNum() {\r\n\t\t\t\treturn (id) => {\r\n\t\t\t\t\tconst num = this.cart.reduce((acc, cur) => {\r\n\t\t\t\t\t\tif (id == cur.id) {\r\n\t\t\t\t\t\t\treturn (acc += cur.number)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\treturn acc\r\n\t\t\t\t\t}, 0)\r\n\t\t\t\t\treturn num\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync onLoad() {\r\n\t\t\tthis.categories = await this.$api('categories')\r\n\t\t\tthis.noticeList = await this.$api('notices')\r\n\t\t\tthis.curCategoryId = this.categories?.length && this.categories[0].id\r\n\t\t\tthis.$nextTick(() => this.calcSize())\r\n\t\t},\r\n\t\tupdated() {},\r\n\t\tmethods: {\r\n\t\t\tpay() {\r\n\r\n\t\t\t},\r\n\t\t\tclearall() {\r\n\r\n\t\t\t},\r\n\t\t\t// 添加购物车(直接/根据某一规格匹配)\r\n\t\t\thandleAddToCart(product) {\r\n\t\t\t\tconst index = this.cart.findIndex((item) => {\r\n\t\t\t\t\tif (!item.is_single) {\r\n\t\t\t\t\t\t// 如果是多个规格，要匹配所有规格是否一致\r\n\t\t\t\t\t\treturn (item.id === product.id && item.material_text === product.material_text)\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn (item.id === product.id)\r\n\t\t\t\t})\r\n\t\t\t\t// 购物车已有商品\r\n\t\t\t\tif (index > -1) {\r\n\t\t\t\t\tthis.cart[index].number += product.number || 1\r\n\t\t\t\t}\r\n\t\t\t\tdebugger\r\n\t\t\t\t// 购物车新添加商品\r\n\t\t\t\tthis.cart.push({\r\n\t\t\t\t\tid: product.id,\r\n\t\t\t\t\tcate_id: product.category_id,\r\n\t\t\t\t\tname: product.name || '--', // falsy value \r\n\t\t\t\t\tprice: product.price,\r\n\t\t\t\t\tnumber: product.number || 1,\r\n\t\t\t\t\timage: product.images[0]?.url ?? '',\r\n\t\t\t\t\tis_single: product.is_single,\r\n\t\t\t\t\tmaterial_text: product.material_text,\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\thandleMinusFromCart(product) {\r\n\t\t\t\tlet index = -1\r\n\t\t\t\tif (product.is_single) {\r\n\t\t\t\t\tindex = this.cart.findIndex(item => item.id === product.id)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tindex = this.cart.findIndex(item => item.id === product.id && item.material_text === product.material_text)\r\n\t\t\t\t}\r\n\t\t\t\tthis.cart[index].number -= 1\r\n\t\t\t\tif (this.cart[index].number <= 0) {\r\n\t\t\t\t\tthis.cart.splice(index, 1)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandAddToCartInModal() {\r\n\t\t\t\tthis.closeProductModal()\r\n\t\t\t},\r\n\t\t\tcloseProductModal() {\r\n\t\t\t\tthis.productModalVisible = false\r\n\t\t\t\tthis.product = {}\r\n\t\t\t},\r\n\t\t\tshowProductModal(product) {\r\n\t\t\t\tthis.product = product\r\n\t\t\t\tthis.productModalVisible = true\r\n\t\t\t},\r\n\t\t\tswitchTabChange(idx) {\r\n\t\t\t\tif (this.switchBtnIdx === idx) return\r\n\t\t\t\tthis.switchBtnIdx = idx\r\n\t\t\t\t// 外卖进入地址页面\r\n\t\t\t\tif (this.switchBtnIdx) {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/addresses/addresses'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleMenuSelected(id) {\r\n\t\t\t\tif (id == this.curCategoryId) return\r\n\t\t\t\tthis.productScrollTop = this.categories.find(item => item.id === id)?.top\r\n\t\t\t\t// 样式高亮\r\n\t\t\t\tthis.$nextTick(() => (this.curCategoryId = id))\r\n\t\t\t\t// 产品列表居首位\r\n\t\t\t},\r\n\t\t\tcalcSize() {\r\n\t\t\t\tlet h = 0\r\n\t\t\t\tconst adDom = uni.createSelectorQuery().select('#ads')\r\n\t\t\t\tadDom.fields({\r\n\t\t\t\t\tsize: true\r\n\t\t\t\t}, (data) => {\r\n\t\t\t\t\th += Math.floor(data.height)\r\n\t\t\t\t}).exec()\r\n\r\n\t\t\t\tthis.categories.forEach(item => {\r\n\t\t\t\t\tlet productsDom = uni.createSelectorQuery().select(`#products-${item.id}`)\r\n\t\t\t\t\tproductsDom.fields({\r\n\t\t\t\t\t\tsize: true\r\n\t\t\t\t\t}, (data) => {\r\n\t\t\t\t\t\titem.top = h\r\n\t\t\t\t\t\th += Math.floor(data.height)\r\n\t\t\t\t\t\titem.bottom = h\r\n\t\t\t\t\t}).exec()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.container {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tbackground-color: $bg-color-white;\r\n\t}\r\n\r\n\t.header {\r\n\t\t// z-index: 10;\r\n\t\tbox-shadow: $box-shadow;\r\n\r\n\t\t.search-box {\r\n\t\t\tpadding: 20rpx 40rpx;\r\n\t\t\theight: 100rpx;\r\n\r\n\t\t\t.search-input {\r\n\t\t\t\theight: 60rpx;\r\n\t\t\t\tbackground-color: #f7f7f7;\r\n\t\t\t\tborder-radius: 50rem;\r\n\r\n\t\t\t\t.icon {\r\n\t\t\t\t\twidth: 30rpx;\r\n\t\t\t\t\theight: 30rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.center {\r\n\t\t\theight: 130rpx;\r\n\t\t\tpadding: 10rpx 40rpx;\r\n\r\n\t\t\t.store {\r\n\r\n\t\t\t\t.store-name {\r\n\t\t\t\t\tflex: 1;\r\n\r\n\t\t\t\t\t.star-icon {\r\n\t\t\t\t\t\twidth: 30rpx;\r\n\t\t\t\t\t\theight: 30rpx;\r\n\t\t\t\t\t\tmargin: 10rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.r-arrow-icon {\r\n\t\t\t\t\t\twidth: 40rpx;\r\n\t\t\t\t\t\theight: 40rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.switch-btns {\r\n\t\t\t\tpadding: 4rpx;\r\n\t\t\t\tbackground-color: #f6f6f6;\r\n\t\t\t\tborder-radius: 50rem;\r\n\t\t\t\tborder: 2rpx solid #eaeaea;\r\n\r\n\t\t\t\t.sw-btn {\r\n\t\t\t\t\twidth: 50%;\r\n\t\t\t\t\tborder-radius: 50rem;\r\n\t\t\t\t\tfont-size: $font-size-sm;\r\n\t\t\t\t\tline-height: 2.4;\r\n\t\t\t\t\tpadding: 0 28rpx;\r\n\r\n\t\t\t\t\t&.active {\r\n\t\t\t\t\t\tbackground-color: #343434;\r\n\t\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.notice {\r\n\t\t\theight: 60rpx;\r\n\t\t\tpadding: 10rpx 40rpx;\r\n\r\n\t\t\t.notice-swipper {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\theight: 100%;\r\n\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t.notice-swiper-item {\r\n\t\t\t\t\theight: 100%;\r\n\t\t\t\t\twidth: 100%;\r\n\r\n\t\t\t\t\t.n-icon {\r\n\t\t\t\t\t\twidth: 30rpx;\r\n\t\t\t\t\t\theight: 30rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.n-content {\r\n\t\t\t\t\t\tflex: 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.more {\r\n\t\t\t\t.down-icon {\r\n\t\t\t\t\twidth: 30rpx;\r\n\t\t\t\t\theight: 30rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.main {\r\n\t\tflex: 1;\r\n\t\tdisplay: flex;\r\n\t\toverflow: hidden;\r\n\r\n\r\n\t\t.i-image {\r\n\t\t\twidth: 180rpx;\r\n\t\t}\r\n\r\n\t\t.i-infos {\r\n\r\n\t\t\t.tags-scroll {\r\n\t\t\t\tmargin-bottom: 8rpx;\r\n\r\n\r\n\t\t\t\t.tag {\r\n\t\t\t\t\tmax-width: 40%;\r\n\t\t\t\t\tpadding: 6rpx 10rpx;\r\n\t\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.desc {\r\n\t\t\t\tdisplay: -webkit-box;\r\n\t\t\t\t-webkit-box-orient: vertical;\r\n\t\t\t\t-webkit-line-clamp: 2;\r\n\t\t\t\toverflow: hidden;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.menu-bar,\r\n\t\t.product-list {\r\n\t\t\theight: calc(100vh - 100rpx - 130rpx - 60rpx); // 通过计算header各个区块大小来的\r\n\t\t}\r\n\r\n\t\t.menu-bar {\r\n\t\t\twidth: 170rpx;\r\n\t\t\tbackground-color: #f7f7f7;\r\n\r\n\t\t\t.menu-wrap {\r\n\r\n\t\t\t\t.cate-item {\r\n\t\t\t\t\tpadding: 30rpx 20rpx;\r\n\r\n\t\t\t\t\t.c-icon {\r\n\t\t\t\t\t\twidth: 50rpx;\r\n\t\t\t\t\t\theight: 50rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t&.active {\r\n\t\t\t\t\t\tbackground-color: $bg-color-white;\r\n\t\t\t\t\t\tfont-weight: 500;\r\n\t\t\t\t\t\tcolor: $text-color-base;\r\n\t\t\t\t\t\tborder-left: 7rpx solid $color-primary;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.product-list {\r\n\t\t\tflex: 1;\r\n\r\n\t\t\t.product-wrap {\r\n\t\t\t\tpadding: 0 20rpx;\r\n\t\t\t\tpadding-bottom: 130rpx;\r\n\r\n\t\t\t\t.ad-swipper {\r\n\r\n\t\t\t\t\t.ad-swiper {\r\n\t\t\t\t\t\theight: 300rpx;\r\n\r\n\t\t\t\t\t\t.ad-swiper-item {\r\n\r\n\t\t\t\t\t\t\t.ad-img {\r\n\t\t\t\t\t\t\t\twidth: 100%;\r\n\t\t\t\t\t\t\t\theight: 100%;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import mod from \"-!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../99soft/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&id=57280228&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1703053468790\n      var cssReload = require(\"C:/99soft/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}